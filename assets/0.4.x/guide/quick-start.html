<article class=flex-1><h1 id=快速上手>快速上手<a class=anchor href=#快速上手>#</a></h1><h2 id=创建一个-cargo-项目>创建一个 Cargo 项目<a class=anchor href=#创建一个-cargo-项目>#</a></h2><div class=code><button class="i-lucide-copy transition w-4 h-4 select-none absolute top-4 right-2 op-20 hover:op-80"></button><pre class=language-bash><code><span class=line><span class=operator>></span> <span class=number>cargo</span> <span class=function.call>new</span> <span class=parameter>app</span>
</span></code></pre></div><h2 id=安装-viz-和-tokio>安装 Viz 和 Tokio<a class=anchor href=#安装-viz-和-tokio>#</a></h2><div class=code><button class="i-lucide-copy transition w-4 h-4 select-none absolute top-4 right-2 op-20 hover:op-80"></button><pre class=language-bash><code><span class=line><span class=operator>></span> <span class=number>cd</span> <span class=function.call>app</span>
</span><span class=line><span class=operator>></span> <span class=number>cargo</span> <span class=function.call>add</span> <span class=parameter>viz</span>
</span><span class=line><span class=operator>></span> <span class=number>cargo</span> <span class=function.call>add</span> <span class=parameter>tokio</span>
</span></code></pre></div><h2 id=编写-main>编写 main<a class=anchor href=#编写-main>#</a></h2><div class=code><button class="i-lucide-copy transition w-4 h-4 select-none absolute top-4 right-2 op-20 hover:op-80"></button><pre class=language-rust><code><span class=line><span class=keyword>use</span> <span class=namespace>std</span><span class=punctuation.delimiter>::</span><span class=namespace>net</span><span class=punctuation.delimiter>::</span><span class=type>SocketAddr</span><span class=punctuation.delimiter>;</span>
</span><span class=line><span class=keyword>use</span> <span class=namespace>viz</span><span class=punctuation.delimiter>::</span><span class=punctuation.bracket>{</span><span class=type>Request</span><span class=punctuation.delimiter>,</span> <span class=type>Result</span><span class=punctuation.delimiter>,</span> <span class=type>Router</span><span class=punctuation.delimiter>,</span> <span class=type>Server</span><span class=punctuation.delimiter>,</span> <span class=type>ServiceMaker</span><span class=punctuation.bracket>}</span><span class=punctuation.delimiter>;</span>
</span><span class=line>
</span><span class=line><span class=keyword>async</span> <span class=keyword.function>fn</span> <span class=function>index</span><span class=punctuation.bracket>(</span>_: <span class=type>Request</span><span class=punctuation.bracket>)</span> <span class=operator>-></span> <span class=type>Result</span><span class=punctuation.bracket><</span><span class=keyword>&</span><span class=label>'</span><span class=label>static</span> <span class=type.builtin>str</span><span class=punctuation.bracket>></span> <span class=punctuation.bracket>{</span>
</span><span class=line>    <span class=type>Ok</span><span class=punctuation.bracket>(</span><span class=string>"Hello Viz"</span><span class=punctuation.bracket>)</span>
</span><span class=line><span class=punctuation.bracket>}</span>
</span><span class=line>
</span><span class=line><span class=punctuation.bracket>#</span><span class=punctuation.bracket>[</span><span class=namespace>tokio</span><span class=punctuation.delimiter>::</span><span class=function.macro>main</span><span class=punctuation.bracket>]</span>
</span><span class=line><span class=keyword>async</span> <span class=keyword.function>fn</span> <span class=function>main</span><span class=punctuation.bracket>(</span><span class=punctuation.bracket>)</span> <span class=operator>-></span> <span class=type>Result</span><span class=punctuation.bracket><</span><span class=punctuation.bracket>(</span><span class=punctuation.bracket>)</span><span class=punctuation.bracket>></span> <span class=punctuation.bracket>{</span>
</span><span class=line>    <span class=keyword>let</span> <span class=variable>addr</span> <span class=operator>=</span> <span class=type>SocketAddr</span><span class=punctuation.delimiter>::</span><span class=function>from</span><span class=punctuation.bracket>(</span><span class=punctuation.bracket>(</span><span class=punctuation.bracket>[</span><span class=constant>127</span><span class=punctuation.delimiter>,</span> <span class=constant>0</span><span class=punctuation.delimiter>,</span> <span class=constant>0</span><span class=punctuation.delimiter>,</span> <span class=constant>1</span><span class=punctuation.bracket>]</span><span class=punctuation.delimiter>,</span> <span class=constant>3000</span><span class=punctuation.bracket>)</span><span class=punctuation.bracket>)</span><span class=punctuation.delimiter>;</span>
</span><span class=line>    <span class=function.macro>println</span><span class=function.macro>!</span><span class=punctuation.bracket>(</span><span class=string>"listening on {addr}"</span><span class=punctuation.bracket>)</span><span class=punctuation.delimiter>;</span>
</span><span class=line>
</span><span class=line>    <span class=keyword>let</span> <span class=variable>app</span> <span class=operator>=</span> <span class=type>Router</span><span class=punctuation.delimiter>::</span><span class=function>new</span><span class=punctuation.bracket>(</span><span class=punctuation.bracket>)</span><span class=punctuation.delimiter>.</span><span class=function>get</span><span class=punctuation.bracket>(</span><span class=string>"/"</span><span class=punctuation.delimiter>,</span> <span class=variable>index</span><span class=punctuation.bracket>)</span><span class=punctuation.delimiter>;</span>
</span><span class=line>
</span><span class=line>    <span class=conditional>if</span> <span class=keyword>let</span> <span class=constructor>Err</span><span class=punctuation.bracket>(</span><span class=variable>err</span><span class=punctuation.bracket>)</span> <span class=operator>=</span> <span class=type>Server</span><span class=punctuation.delimiter>::</span><span class=function>bind</span><span class=punctuation.bracket>(</span><span class=operator>&</span><span class=variable>addr</span><span class=punctuation.bracket>)</span>
</span><span class=line>        <span class=punctuation.delimiter>.</span><span class=function>serve</span><span class=punctuation.bracket>(</span><span class=type>ServiceMaker</span><span class=punctuation.delimiter>::</span><span class=function>from</span><span class=punctuation.bracket>(</span><span class=variable>app</span><span class=punctuation.bracket>)</span><span class=punctuation.bracket>)</span>
</span><span class=line>        <span class=punctuation.delimiter>.</span><span class=keyword.return>await</span>
</span><span class=line>    <span class=punctuation.bracket>{</span>
</span><span class=line>        <span class=function.macro>println</span><span class=function.macro>!</span><span class=punctuation.bracket>(</span><span class=string>"{err}"</span><span class=punctuation.bracket>)</span><span class=punctuation.delimiter>;</span>
</span><span class=line>    <span class=punctuation.bracket>}</span>
</span><span class=line>
</span><span class=line>    <span class=type>Ok</span><span class=punctuation.bracket>(</span><span class=punctuation.bracket>(</span><span class=punctuation.bracket>)</span><span class=punctuation.bracket>)</span>
</span><span class=line><span class=punctuation.bracket>}</span>
</span></code></pre></div><h2 id=运行测试>运行测试<a class=anchor href=#运行测试>#</a></h2><div class=code><button class="i-lucide-copy transition w-4 h-4 select-none absolute top-4 right-2 op-20 hover:op-80"></button><pre class=language-bash><code><span class=line><span class=operator>></span> <span class=number>cargo</span> <span class=function.call>run</span> <span class=parameter>--</span> <span class=parameter>--nocaputre</span>
</span></code></pre></div><div class=page-nav><a class=prev-link href=/docs/0.4.x/guide/introduction><span class=desc><i class="block i-lucide-chevron-left w-3 h-3"></i> 前一篇</span><span class=title>介绍</span></a><a class=next-link href=/docs/0.4.x/concepts/requests-and-responses><span class=desc>下一篇 <i class="block i-lucide-chevron-right w-3 h-3"></i></span><span class=title>请求及响应</span></a></div></article><nav class="flex-col gap-5 hidden lg:flex"><div class="py-1 text-2 uppercase">本页目录</div><ul class=text-3><li><a class="block py-1 font-normal transition-colors op75 hover:op100"href=#创建一个-cargo-项目>创建一个 Cargo 项目</a></li><li><a class="block py-1 font-normal transition-colors op75 hover:op100"href=#安装-viz-和-tokio>安装 Viz 和 Tokio</a></li><li><a class="block py-1 font-normal transition-colors op75 hover:op100"href=#编写-main>编写 main</a></li><li><a class="block py-1 font-normal transition-colors op75 hover:op100"href=#运行测试>运行测试</a></li></ul></nav>