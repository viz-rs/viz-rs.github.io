<article class=flex-1><h1 id=server>Server<a class=anchor href=#server>#</a></h1><p>By configuring the <a href=https://docs.rs/viz/0.4.x/viz/struct.Server.html><code>Server</code></a>, you can then quickly start a service.</p><p>Before it can be fully started, the <a href=https://docs.rs/viz/0.4.x/viz/struct.Router.html><code>Router</code></a> instance needs to be converted to a <a href=https://docs.rs/viz/0.4.x/viz/struct.ServiceMaker.html><code>ServiceMaker</code></a> instance that implements the <a href=https://docs.rs/hyper/0.14/hyper/service/index.html><code>Service</code></a> trait.</p><div class=code><button class="i-lucide-copy transition w-4 h-4 select-none absolute top-4 right-2 op-20 hover:op-80"></button><pre class=language-rust><code><span class=line><span class=keyword>async</span> <span class=keyword.function>fn</span> <span class=function>index</span><span class=punctuation.bracket>(</span>_: <span class=type>Request</span><span class=punctuation.bracket>)</span> <span class=operator>-></span> <span class=type>Result</span><span class=punctuation.bracket><</span><span class=keyword>&</span><span class=label>'</span><span class=label>static</span> <span class=type.builtin>str</span><span class=punctuation.bracket>></span> <span class=punctuation.bracket>{</span>
</span><span class=line>    <span class=type>Ok</span><span class=punctuation.bracket>(</span><span class=string>"Hello, World!"</span><span class=punctuation.bracket>)</span>
</span><span class=line><span class=punctuation.bracket>}</span>
</span><span class=line>
</span><span class=line><span class=keyword>let</span> <span class=variable>addr</span> <span class=operator>=</span> <span class=type>SocketAddr</span><span class=punctuation.delimiter>::</span><span class=function>from</span><span class=punctuation.bracket>(</span><span class=punctuation.bracket>(</span><span class=punctuation.bracket>[</span><span class=constant>127</span><span class=punctuation.delimiter>,</span> <span class=constant>0</span><span class=punctuation.delimiter>,</span> <span class=constant>0</span><span class=punctuation.delimiter>,</span> <span class=constant>1</span><span class=punctuation.bracket>]</span><span class=punctuation.delimiter>,</span> <span class=constant>3000</span><span class=punctuation.bracket>)</span><span class=punctuation.bracket>)</span><span class=punctuation.delimiter>;</span>
</span><span class=line>
</span><span class=line><span class=comment>// Create Router instances</span>
</span><span class=line><span class=keyword>let</span> <span class=variable>app</span> <span class=operator>=</span> <span class=type>Router</span><span class=punctuation.delimiter>::</span><span class=function>new</span><span class=punctuation.bracket>(</span><span class=punctuation.bracket>)</span><span class=punctuation.delimiter>.</span><span class=function>get</span><span class=punctuation.bracket>(</span><span class=string>"/"</span><span class=punctuation.delimiter>,</span> <span class=variable>index</span><span class=punctuation.bracket>)</span><span class=punctuation.delimiter>;</span>
</span><span class=line>
</span><span class=line><span class=comment>// Create a Server instance and bind the port</span>
</span><span class=line><span class=conditional>if</span> <span class=keyword>let</span> <span class=constructor>Err</span><span class=punctuation.bracket>(</span><span class=variable>err</span><span class=punctuation.bracket>)</span> <span class=operator>=</span> <span class=type>Server</span><span class=punctuation.delimiter>::</span><span class=function>bind</span><span class=punctuation.bracket>(</span><span class=operator>&</span><span class=variable>addr</span><span class=punctuation.bracket>)</span>
</span><span class=line>    <span class=comment>// Converting to a ServiceMaker Instance</span>
</span><span class=line>    <span class=punctuation.delimiter>.</span><span class=function>serve</span><span class=punctuation.bracket>(</span><span class=type>ServiceMaker</span><span class=punctuation.delimiter>::</span><span class=function>from</span><span class=punctuation.bracket>(</span><span class=variable>app</span><span class=punctuation.bracket>)</span><span class=punctuation.bracket>)</span>
</span><span class=line>    <span class=punctuation.delimiter>.</span><span class=keyword.return>await</span>
</span><span class=line><span class=punctuation.bracket>{</span>
</span><span class=line>    <span class=function.macro>println</span><span class=function.macro>!</span><span class=punctuation.bracket>(</span><span class=string>"{err}"</span><span class=punctuation.bracket>)</span><span class=punctuation.delimiter>;</span>
</span><span class=line><span class=punctuation.bracket>}</span>
</span></code></pre></div><h2 id=tcp/http>TCP/HTTP<a class=anchor href=#tcp/http>#</a></h2><p>Enable the <code>http1</code> or <code>http2</code> feature, the default <code>http1</code> is already enabled.</p><h2 id=unix-sock-domain>Unix Sock Domain<a class=anchor href=#unix-sock-domain>#</a></h2><p>Enabling the <code>unix-socket</code> feature usually requires an inverse proxy (e.g., Nginx Proxy).</p><div class=page-nav><a class=prev-link href=/docs/0.4.x/concepts/extractors><span class=desc><i class="block i-lucide-chevron-left w-3 h-3"></i> Previous</span><span class=title>Extractors</span></a><a class=next-link href=/docs/0.4.x/concepts/error-handling><span class=desc>Next <i class="block i-lucide-chevron-right w-3 h-3"></i></span><span class=title>Error Handling</span></a></div></article><nav class="flex-col gap-5 hidden lg:flex"><div class="py-1 text-2 uppercase">On this page</div><ul class=text-3><li><a class="block py-1 font-normal transition-colors op75 hover:op100"href=#tcp/http>TCP/HTTP</a></li><li><a class="block py-1 font-normal transition-colors op75 hover:op100"href=#unix-sock-domain>Unix Sock Domain</a></li></ul></nav>